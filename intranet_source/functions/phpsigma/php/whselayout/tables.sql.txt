ALTER TABLE SAG_OWNER.WHSE_LAYOUT
 DROP PRIMARY KEY CASCADE;

DROP TABLE SAG_OWNER.WHSE_LAYOUT CASCADE CONSTRAINTS;

CREATE TABLE SAG_OWNER.WHSE_LAYOUT
(
  ENTRY_NUM		NUMBER(10)			NOT NULL,
  ARRIVAL_NUM       NUMBER(7)                   NOT NULL,
  FUME_STATUS       VARCHAR2(10 BYTE)           NOT NULL,  
  HATCH_DECK        VARCHAR2(2 BYTE)            NOT NULL,
  RECEIVER_ID       NUMBER(6)                   NOT NULL,
  COMMODITY_CODE    NUMBER(12)                  NOT NULL,
  VARIETY           VARCHAR2(20 BYTE)           NOT NULL,
  CARGO_LABEL       VARCHAR2(20 BYTE)           NOT NULL,
  CARGO_SIZE        VARCHAR2(6 BYTE)            NOT NULL,
  SPECIAL_HANDLING  VARCHAR2(20 BYTE)           NOT NULL,
  QTY_EXPECTED      NUMBER(8,2),
  FUME_SECTION      VARCHAR2(6 BYTE),
  FUME_ROWS         VARCHAR2(20 BYTE),
  TRANSFER_TO_WHSE  VARCHAR2(1 BYTE),
  TRANSFER_TO_BOX   VARCHAR2(1 BYTE),
  TRANSFER_TO_ROWS  VARCHAR2(20 BYTE),
	PRIMARY KEY (ENTRY_NUM)
)
TABLESPACE SAG_OWNER_DATA
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON COLUMN SAG_OWNER.WHSE_LAYOUT.ARRIVAL_NUM IS 'SAME AS CARGO TRACKING';

COMMENT ON COLUMN SAG_OWNER.WHSE_LAYOUT.HATCH_DECK IS 'HATCH IS NUMBER; DECK IS CHAR';

COMMENT ON COLUMN SAG_OWNER.WHSE_LAYOUT.SPECIAL_HANDLING IS 'QC, HOTLOAD-F, HOTLOAD-WHSE';

COMMENT ON COLUMN SAG_OWNER.WHSE_LAYOUT.FUME_STATUS IS 'PRE-FUMED, NON-FUMED';


CREATE UNIQUE INDEX SAG_OWNER.WHSE_LAYOUT_PK ON SAG_OWNER.WHSE_LAYOUT
(ARRIVAL_NUM, FUME_STATUS, HATCH_DECK, RECEIVER_ID, COMMODITY_CODE, 
VARIETY, CARGO_LABEL, CARGO_SIZE, SPECIAL_HANDLING)
LOGGING
TABLESPACE SAG_OWNER_DATA
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;

insert into whse_layout VALUES ('1', '4321', 'PRE-FUMED', '2A', '399', '8060', 'THOMSEEDLESS', 'NONE', 'NONE', 'NONE', 245, '2', '20-34', 'C', '5', '300-330');

CREATE SEQUENCE SAG_OWNER.WHSE_LAYOUT_SEQ
  START WITH 1
  MAXVALUE 9999999999999999999
  MINVALUE 1
  NOCYCLE
  CACHE 20
  NOORDER;

CREATE OR REPLACE TRIGGER WHSE_LAYOUT_INS

BEFORE INSERT
ON SAG_OWNER.WHSE_LAYOUT
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
begin

select whse_layout_seq.nextval into :new.entry_num from dual;
end;










----------------









ARRIVAL_NUM       NUMBER(7)                   NOT NULL,
  FUME_STATUS       VARCHAR2(10 BYTE)           NOT NULL,  
  HATCH_DECK        VARCHAR2(2 BYTE)            NOT NULL,
  RECEIVER_ID       NUMBER(6)                   NOT NULL,
  COMMODITY_CODE    NUMBER(12)                  NOT NULL,
  VARIETY           VARCHAR2(20 BYTE)           NOT NULL,
  CARGO_LABEL       VARCHAR2(20 BYTE)           NOT NULL,
  CARGO_SIZE        VARCHAR2(6 BYTE)            NOT NULL,
  SPECIAL_HANDLING  VARCHAR2(20 BYTE)           NOT NULL,
  QTY_EXPECTED      NUMBER(8,2),
  FUME_SECTION      VARCHAR2(6 BYTE),
  FUME_ROWS         VARCHAR2(20 BYTE),
  TRANSFER_TO_WHSE  VARCHAR2(1 BYTE),
  TRANSFER_TO_BOX   VARCHAR2(1 BYTE),
  TRANSFER_TO_ROWS  VARCHAR2(20 BYTE)

ALTER TABLE SAG_OWNER.WHSE_LAYOUT ADD (
  CONSTRAINT WHSE_LAYOUT_PK
 PRIMARY KEY
 (ENTRY_NUM)
    USING INDEX 
    TABLESPACE SAG_OWNER_DATA
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ));

